<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="../../assets/css/sidebar.css" />
  <link rel="stylesheet" href="../../assets/css/dashboard.css">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body>
  <!-- Connection Status Indicator -->
  <div id="connectionStatus" class="connection-status disconnected">
    <i class="fas fa-wifi"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...
  </div>

  <div class="dashboard-layout">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h2>SIRIN MUSEUM</h2>
        <div class="role">MANAGER</div>
      </div>

      <div class="user-profile">
        <div class="profile-avatar"><i class="fas fa-user"></i></div>
        <div class="profile-name" id="profileName">‡∏Ñ‡∏∏‡∏ì‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</div>
        <div class="profile-role" id="profileRole">‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå</div>
        <div class="profile-time" id="sidebarLoginTime">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö: 19:52</div>
      </div>

      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" class="nav-link active">üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</a>
        </li>
        <li class="nav-item">
          <a href="export.html" class="nav-link">üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a>
        </li>
      </ul>
      <button class="logout-btn" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="content-header">
        <h1>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</h1>
        <p>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</p>
      </div>

      <!-- Search Section -->
      <div class="search-section">
        <div class="search-card">
          <h3 class="search-title">
            <i class="fas fa-search"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°
          </h3>
          <div class="search-container">
            <div class="search-group">
              <label for="searchName">‡∏ä‡∏∑‡πà‡∏≠/‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°</label>
              <input type="text" id="searchName" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏°" class="search-input">
            </div>
            <div class="search-group">
              <label for="searchTag">Tag ID</label>
              <input type="text" id="searchTag" placeholder="Tag1234, ABC123" class="search-input">
            </div>
            <div class="search-group">
              <label for="searchRoom">‡∏´‡πâ‡∏≠‡∏á</label>
              <select id="searchRoom" class="search-input">
                <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á</option>
                <option value="1">‡∏´‡πâ‡∏≠‡∏á 1 - ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡∏£‡∏¥‡∏Å‡πÑ‡∏Å‡∏£‡πÄ‡∏à‡πâ‡∏≤‡∏ü‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå</option>
                <option value="2">‡∏´‡πâ‡∏≠‡∏á 2 - ‡∏´‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡πà‡∏á‡∏•‡πâ‡∏ô‡∏ï‡∏ô</option>
                <option value="3">‡∏´‡πâ‡∏≠‡∏á 3 - ‡πÄ‡∏Ç‡∏≤‡∏´‡∏•‡∏ß‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏°‡∏≤‡∏Å‡∏°‡∏µ</option>
                <option value="4">‡∏´‡πâ‡∏≠‡∏á 4 - ‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏Å‡∏•‡πâ‡∏ô‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô</option>
                <option value="5">‡∏´‡πâ‡∏≠‡∏á 5 - ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏•‡∏∏‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏õ‡∏≤‡∏Å‡∏û‡∏ô‡∏±‡∏á</option>
                <option value="6">‡∏´‡πâ‡∏≠‡∏á 6 - ‡∏ä‡∏≤‡∏¢‡∏ù‡∏±‡πà‡∏á‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå</option>
                <option value="7">‡∏´‡πâ‡∏≠‡∏á 7 - ‡∏ö‡∏£‡∏¥‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏≠‡πà‡∏≤‡∏ß‡πÑ‡∏ó‡∏¢</option>
                <option value="8">‡∏´‡πâ‡∏≠‡∏á 8 - ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏ó‡πâ‡πÅ‡∏Å‡πà‡∏°‡∏´‡∏≤‡∏ä‡∏ô</option>
              </select>
            </div>
            <div class="search-actions">
              <button class="search-btn" onclick="searchVisitors()">
                <i class="fas fa-search"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
              </button>
              <button class="clear-btn" onclick="clearSearch()">
                <i class="fas fa-times"></i> ‡∏•‡πâ‡∏≤‡∏á
              </button>
            </div>
          </div>

          <!-- Quick Search Tags -->
          <div class="quick-searches">
            <div class="quick-search-tags">
              <span class="quick-tag" onclick="quickSearch('group')">
                <i class="fas fa-users"></i> ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
              </span>
              <span class="quick-tag" onclick="quickSearch('individual')">
                <i class="fas fa-user"></i> ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Search Results Modal -->
      <div id="searchModal" class="search-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="search-modal-content">
          <div class="search-modal-header">
            <h3 id="searchModalTitle">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
            <button class="modal-close" onclick="closeSearchModal()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="search-modal-body">
            <div class="search-results-summary">
              <span id="searchResultsCount">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            </div>
            <div id="searchResultsContainer">
              <!-- Search results will appear here -->
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content active">
        <!-- Statistics Cards -->
        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background: linear-gradient(45deg, #2a8c78, #1a6b5e);">üë•</div>
              <div class="card-title">
                ‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
                <i class="fas fa-search-plus view-all-visitors-btn" title="‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"
                  style="margin-left: 8px; cursor: pointer; color: #3498db; font-size: 0.9em; opacity: 0.8;"></i>
              </div>
            </div>
            <div class="stat-number" id="totalVisitors">-</div>
            <div class="stat-label">‡∏Ñ‡∏ô</div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background: linear-gradient(45deg, #3498db, #2980b9);">üè¢</div>
              <div class="card-title">‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
            </div>
            <div class="stat-number">8</div>
            <div class="stat-label">‡∏´‡πâ‡∏≠‡∏á</div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background: linear-gradient(45deg, #9b59b6, #8e44ad);">üì°</div>
              <div class="card-title">iBeacon ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</div>
            </div>
            <div class="stat-number" id="activeBeacons">-</div>
            <div class="stat-label">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</div>
          </div>
        </div>

        <!-- Section Divider -->
        <div class="section-divider">
          <h2>üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á</h2>
          <p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß</p>
        </div>

        <!-- Museum Layout Section -->
        <div class="main-dashboard">
          <div class="museum-layout">
            <h2 class="layout-title">
              <i class="fas fa-map-marked-alt"></i>
              ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡∏û‡∏¥‡∏û‡∏¥‡∏ò‡∏†‡∏±‡∏ì‡∏ë‡πå
            </h2>
            <div class="museum-image-container">
              <img src="https://blog.wu.ac.th/wp-content/uploads/2022/10/S__12132359.jpg" alt="Museum Layout"
                class="museum-image">

              <!-- Room markers positioned on the museum image -->
              <div class="room-marker" data-room="1" style="left: 32%; top: 78%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 1</div>
              </div>

              <div class="room-marker" data-room="2" style="left: 13%; top: 60%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 2</div>
              </div>

              <div class="room-marker" data-room="3" style="left: 25%; top: 25%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 3</div>
              </div>

              <div class="room-marker" data-room="4" style="left: 42%; top: 28%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 4</div>
              </div>

              <div class="room-marker" data-room="5" style="left: 68%; top: 68%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 5</div>
              </div>

              <div class="room-marker" data-room="6" style="left: 90%; top: 38%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 6</div>
              </div>

              <div class="room-marker" data-room="7" style="left: 78%; top: 26%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 7</div>
              </div>

              <div class="room-marker" data-room="8" style="left: 62%; top: 32%;">
                <div class="marker-circle capacity-green">
                  <span class="visitor-count">-</span>
                </div>
                <div class="room-label">‡∏´‡πâ‡∏≠‡∏á 8</div>
              </div>
            </div>

            <div class="legend">
              <div class="legend-item">
                <div class="legend-color capacity-green"></div>
                <span class="legend-text">‡∏ß‡πà‡∏≤‡∏á (&lt;60%)</span>
              </div>
              <div class="legend-item">
                <div class="legend-color capacity-yellow"></div>
                <span class="legend-text">‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏ï‡πá‡∏° (60-80%)</span>
              </div>
              <div class="legend-item">
                <div class="legend-color capacity-red"></div>
                <span class="legend-text">‡πÄ‡∏ï‡πá‡∏°‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏´‡∏°‡∏î (&gt;80%)</span>
              </div>
            </div>
          </div>

          <div class="details-panel">
            <div id="roomDetails" class="empty-state">
              <div class="empty-icon">
                <i class="fas fa-mouse-pointer"></i>
              </div>
              <p style="font-size: 1.2rem; margin-bottom: 10px;">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á</p>
              <p style="font-size: 1rem;">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á</p>
            </div>

            <div class="quick-stats">
              <h4 class="quick-stats-title">
                <i class="fas fa-trophy"></i>
                ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
              </h4>
              <div id="topRooms">
                <div class="quick-stat-item">
                  <span class="quick-stat-label">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
                  <span class="quick-stat-value">-</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Analytics Section -->
        <div class="analytics-section">
          <h2 class="section-title">
            <i class="fas fa-chart-bar"></i>
            ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
          </h2>

          <div class="analytics-grid">
            <!-- Demographics Chart -->
            <div class="chart-card">
              <h3 class="chart-title">
                <i class="fas fa-users"></i>
                ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏û‡∏®‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏¢‡∏∏
              </h3>
              <div class="chart-container">
                <canvas id="demographicsChart"></canvas>
              </div>
            </div>

            <!-- Room Popularity Chart -->
            <div class="chart-card">
              <h3 class="chart-title">
                <i class="fas fa-star"></i>
                ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á
              </h3>
              <div class="chart-container">
                <canvas id="roomPopularityChart"></canvas>
              </div>
            </div>

            <!-- Time Spent Chart -->
            <div class="chart-card full-width">
              <h3 class="chart-title">
                <i class="fas fa-clock"></i>
                ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á (‡∏ô‡∏≤‡∏ó‡∏µ)
              </h3>
              <div class="chart-container">
                <canvas id="timeSpentChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="../../assets/js/dashboard.js"></script>
  <script src="../../assets/js/chart.js"></script>
  <script src="../../assets/js/popularity_chart.js"></script>
  <script src="../../assets/js/time_spent_chart.js"></script>

</body>

</html>